<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KnexMail Emoji Handles - Ultimate Demo</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Orbitron:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- AOS Animation -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #0a0a0a;
      color: #fff;
      line-height: 1.6;
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Background Effects */
    .grid-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image:
        linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 50px 50px;
      pointer-events: none;
      z-index: -1;
    }

    .scanlines {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        transparent 50%,
        rgba(0, 255, 255, 0.02) 50%
      );
      background-size: 100% 4px;
      pointer-events: none;
      z-index: -1;
      animation: scanline 8s linear infinite;
    }

    @keyframes scanline {
      0% { transform: translateY(0); }
      100% { transform: translateY(4px); }
    }

    /* Top Navigation Bar */
    .demo-nav {
      position: sticky;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0, 255, 255, 0.2);
      padding: 15px 0;
      z-index: 1000;
    }

    .demo-nav-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .demo-nav-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      background: linear-gradient(135deg, #00ffff, #00ff88);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .demo-nav-actions {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .nav-btn {
      padding: 10px 20px;
      font-size: 0.9rem;
      font-weight: 600;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'Inter', sans-serif;
    }

    .nav-btn-primary {
      background: linear-gradient(135deg, #00ffff, #00ff88);
      color: #000;
    }

    .nav-btn-primary:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 20px rgba(0, 255, 255, 0.4);
    }

    .nav-btn-secondary {
      background: rgba(0, 255, 255, 0.1);
      color: #00ffff;
      border: 1px solid rgba(0, 255, 255, 0.3);
    }

    .nav-btn-secondary:hover {
      background: rgba(0, 255, 255, 0.2);
    }

    /* Hero Section */
    .demo-hero {
      padding: 80px 0 40px;
      text-align: center;
    }

    .demo-hero h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #00ffff, #00ff88, #ffff00);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .demo-hero p {
      font-size: 1.25rem;
      color: rgba(255, 255, 255, 0.7);
      max-width: 700px;
      margin: 0 auto 40px;
    }

    /* Dual Input Builder */
    .handle-builder {
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.05), rgba(0, 255, 136, 0.05));
      border: 2px solid rgba(0, 255, 255, 0.3);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 60px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    .builder-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: #00ffff;
      margin-bottom: 10px;
      text-align: center;
    }

    .builder-subtitle {
      text-align: center;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.95rem;
      margin-bottom: 30px;
    }

    .input-methods {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    .input-method {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 255, 255, 0.2);
      border-radius: 16px;
      padding: 25px;
    }

    .input-method-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      color: #00ffff;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .input-method-desc {
      font-size: 0.875rem;
      color: rgba(255, 255, 255, 0.5);
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .builder-input {
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(0, 255, 255, 0.3);
      border-radius: 12px;
      padding: 15px 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      color: #00ff88;
      transition: all 0.3s ease;
      text-align: center;
      margin-bottom: 10px;
    }

    .builder-input:focus {
      outline: none;
      border-color: rgba(0, 255, 255, 0.8);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
    }

    .builder-input::placeholder {
      color: rgba(255, 255, 255, 0.3);
    }

    .builder-input.emoji-input {
      font-size: 2.5rem;
      letter-spacing: 0.1em;
    }

    .input-hint {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.4);
      text-align: center;
      font-style: italic;
    }

    .view-all-btn {
      width: 100%;
      padding: 12px;
      background: rgba(255, 255, 0, 0.1);
      border: 1px solid rgba(255, 255, 0, 0.3);
      border-radius: 10px;
      color: #ffff00;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .view-all-btn:hover {
      background: rgba(255, 255, 0, 0.2);
      transform: scale(1.02);
    }

    .builder-preview {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid rgba(0, 255, 255, 0.4);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 20px;
      min-height: 140px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .builder-preview-label {
      font-size: 0.875rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .builder-preview-emoji {
      font-size: 3.5rem;
      line-height: 1;
      animation: emojiPop 0.5s ease-out;
    }

    @keyframes emojiPop {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .builder-preview-handle {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.25rem;
      color: #00ffff;
    }

    .builder-preview-validation {
      font-size: 0.9rem;
      padding: 8px 16px;
      border-radius: 50px;
      font-weight: 600;
    }

    .validation-valid {
      background: rgba(0, 255, 136, 0.2);
      color: #00ff88;
      border: 1px solid rgba(0, 255, 136, 0.3);
    }

    .validation-invalid {
      background: rgba(255, 0, 0, 0.2);
      color: #ff6666;
      border: 1px solid rgba(255, 0, 0, 0.3);
    }

    .validation-warning {
      background: rgba(255, 255, 0, 0.2);
      color: #ffff00;
      border: 1px solid rgba(255, 255, 0, 0.3);
    }

    /* All Emojis Modal */
    .emoji-picker-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(10px);
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .emoji-picker-modal.active {
      display: flex;
      opacity: 1;
    }

    .emoji-picker-container {
      background: #0a0a0a;
      border: 2px solid rgba(0, 255, 255, 0.3);
      border-radius: 20px;
      width: 90%;
      max-width: 900px;
      max-height: 80vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      animation: modalSlideUp 0.4s ease-out;
    }

    @keyframes modalSlideUp {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .emoji-picker-header {
      padding: 20px 30px;
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 1px solid rgba(0, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .emoji-picker-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: #00ffff;
    }

    .emoji-picker-close {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 0, 0, 0.1);
      border: 1px solid rgba(255, 0, 0, 0.3);
      border-radius: 50%;
      color: #ff6666;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.5rem;
      line-height: 1;
    }

    .emoji-picker-close:hover {
      background: rgba(255, 0, 0, 0.2);
      transform: rotate(90deg);
    }

    .emoji-picker-search {
      padding: 20px 30px;
      background: rgba(0, 0, 0, 0.4);
      border-bottom: 1px solid rgba(0, 255, 255, 0.1);
    }

    .emoji-search-input {
      width: 100%;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(0, 255, 255, 0.3);
      border-radius: 50px;
      color: #fff;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .emoji-search-input:focus {
      outline: none;
      border-color: rgba(0, 255, 255, 0.8);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
    }

    .emoji-picker-content {
      flex: 1;
      overflow-y: auto;
      padding: 30px;
    }

    .emoji-grid-full {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 10px;
    }

    .emoji-item {
      background: rgba(0, 255, 255, 0.05);
      border: 1px solid rgba(0, 255, 255, 0.1);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .emoji-item:hover {
      background: rgba(0, 255, 255, 0.15);
      border-color: rgba(0, 255, 255, 0.4);
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 5px 20px rgba(0, 255, 255, 0.2);
    }

    .emoji-item-icon {
      font-size: 2.5rem;
      margin-bottom: 5px;
      display: block;
    }

    .emoji-item-name {
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.5);
      font-family: 'JetBrains Mono', monospace;
      word-break: break-word;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .input-methods {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .emoji-grid-full {
        grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
      }

      .emoji-picker-container {
        width: 95%;
        max-height: 90vh;
      }
    }
  </style>
</head>
<body>
  <!-- Background Effects -->
  <div class="grid-overlay"></div>
  <div class="scanlines"></div>

  <!-- Top Navigation -->
  <nav class="demo-nav">
    <div class="demo-nav-content">
      <div class="demo-nav-title">üé® EMOJI HANDLES DEMO</div>
      <div class="demo-nav-actions">
        <button class="nav-btn nav-btn-secondary" onclick="window.parent.closeEmojiDemo ? window.parent.closeEmojiDemo() : window.location.href='index.html'">
          ‚Üê Back
        </button>
        <a href="index.html#waitlist" class="nav-btn nav-btn-primary">
          Join Waitlist üöÄ
        </a>
      </div>
    </div>
  </nav>

  <!-- Hero with Dual Input Builder -->
  <section class="demo-hero">
    <div class="container">
      <h1>Build Your Emoji Handle</h1>
      <p>Choose 2-3 emojis for your unique email. Desktop: type names. Mobile: use emoji keyboard!</p>

      <div class="handle-builder" data-aos="fade-up">
        <h3 class="builder-title">‚ú® Dual Input Builder</h3>
        <p class="builder-subtitle">üíª Desktop users type names ‚Ä¢ üì± Mobile users input emojis</p>

        <div class="input-methods">
          <!-- Method 1: Text Names -->
          <div class="input-method">
            <div class="input-method-title">
              <span>üíª</span>
              <span>Desktop: Type Emoji Names</span>
            </div>
            <div class="input-method-desc">
              Type emoji names with dots. Works great on desktop! 2-3 emojis recommended.
            </div>
            <input
              type="text"
              class="builder-input"
              id="textInput"
              placeholder="rocket.fire"
              maxlength="64"
            >
            <div class="input-hint">Examples: rocket.fire, coffee.heart, diamond.hands</div>
            <button class="view-all-btn" onclick="openEmojiPicker()">
              <span>üìö</span>
              <span>View All 1,854 Emojis</span>
            </button>
          </div>

          <!-- Method 2: Direct Emoji Input -->
          <div class="input-method">
            <div class="input-method-title">
              <span>üì±</span>
              <span>Mobile: Input Emojis Directly</span>
            </div>
            <div class="input-method-desc">
              Tap field below, then use your emoji keyboard! 2-3 emojis work perfectly.
            </div>
            <input
              type="text"
              class="builder-input emoji-input"
              id="emojiInput"
              placeholder="üöÄüî•"
              maxlength="3"
              inputmode="none"
            >
            <div class="input-hint">üì± Tap field ‚Üí Use emoji keyboard ‚Üí Paste 2-3 emojis</div>
          </div>
        </div>

        <!-- Live Preview -->
        <div class="builder-preview">
          <div class="builder-preview-label">Live Preview:</div>
          <div class="builder-preview-emoji" id="previewEmoji">üöÄüî•</div>
          <div class="builder-preview-handle" id="previewHandle">rocket.fire@knexmail.com</div>
          <div class="builder-preview-validation validation-valid" id="validationMessage">
            ‚úì Perfect! 2 emojis, ready to reserve
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- All Emojis Modal -->
  <div class="emoji-picker-modal" id="emojiPickerModal">
    <div class="emoji-picker-container">
      <div class="emoji-picker-header">
        <div class="emoji-picker-title">üé® All Available Emojis</div>
        <button class="emoji-picker-close" onclick="closeEmojiPicker()">√ó</button>
      </div>

      <div class="emoji-picker-search">
        <input
          type="text"
          class="emoji-search-input"
          id="emojiSearch"
          placeholder="üîç Search emojis... (e.g., rocket, heart, pizza)"
        >
      </div>

      <div class="emoji-picker-content">
        <div class="emoji-grid-full" id="allEmojisGrid"></div>
      </div>
    </div>
  </div>

  <!-- AOS Animation Library -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <script>
    // Initialize AOS
    AOS.init({
      duration: 800,
      once: true,
      offset: 100
    });

    // Comprehensive emoji map (sample - matches your emoji-map.json)
    const emojiMap = {
      'rocket': 'üöÄ', 'fire': 'üî•', 'heart': '‚ù§Ô∏è', 'coffee': '‚òï',
      'diamond': 'üíé', 'hands': 'üôå', 'pizza': 'üçï', 'delivery': 'üöö',
      'brain': 'üß†', 'power': '‚ö°', 'star': '‚≠ê', 'struck': 'üòç',
      'music': 'üéµ', 'sparkles': '‚ú®', 'love': 'üòç', 'smile': 'üòä',
      'cool': 'üòé', 'party': 'üéâ', 'time': '‚è∞', 'world': 'üåç',
      'traveler': '‚úàÔ∏è', 'ninja': 'ü•∑', 'warrior': '‚öîÔ∏è', 'moon': 'üåô',
      'sun': '‚òÄÔ∏è', 'tree': 'üå≤', 'flower': 'üå∏', 'cat': 'üê±',
      'dog': 'üê∂', 'lion': 'ü¶Å', 'unicorn': 'ü¶Ñ', 'butterfly': 'ü¶ã',
      'crown': 'üëë', 'gem': 'üíé', 'key': 'üîë', 'lock': 'üîí',
      'lightning': '‚ö°', 'flame': 'üî•', 'wave': 'üåä', 'snowflake': '‚ùÑÔ∏è',
      'grinning': 'üòÄ', 'joy': 'üòÇ', 'wink': 'üòâ', 'blush': 'üòä',
      'sunglasses': 'üòé', 'money': 'ü§ë', 'nerd': 'ü§ì', 'thinking': 'ü§î',
      'orange.heart': 'üß°', 'yellow.heart': 'üíõ', 'green.heart': 'üíö',
      'blue.heart': 'üíô', 'purple.heart': 'üíú', 'broken.heart': 'üíî',
      'panda': 'üêº', 'koala': 'üê®', 'tiger': 'üêØ', 'fox': 'ü¶ä',
      'burger': 'üçî', 'taco': 'üåÆ', 'sushi': 'üç£', 'cake': 'üéÇ',
      'donut': 'üç©', 'ice.cream': 'üç¶', 'airplane': '‚úàÔ∏è', 'car': 'üöó',
      'bike': 'üö≤', 'ship': 'üö¢', 'trophy': 'üèÜ', 'medal': 'ü•á',
      'gift': 'üéÅ', 'balloon': 'üéà', 'confetti': 'üéä', 'tada': 'üéâ'
    };

    // Populate all emojis grid
    function populateAllEmojis() {
      const grid = document.getElementById('allEmojisGrid');
      Object.entries(emojiMap).forEach(([name, emoji]) => {
        const div = document.createElement('div');
        div.className = 'emoji-item';
        div.onclick = () => selectEmoji(name, emoji);
        div.innerHTML = `
          <span class="emoji-item-icon">${emoji}</span>
          <div class="emoji-item-name">${name}</div>
        `;
        grid.appendChild(div);
      });
    }

    // Select emoji from picker
    function selectEmoji(name, emoji) {
      const textInput = document.getElementById('textInput');
      const emojiInput = document.getElementById('emojiInput');

      // Add to text input
      const current = textInput.value;
      if (current) {
        textInput.value = current + '.' + name;
      } else {
        textInput.value = name;
      }

      // Add to emoji input (max 3)
      if (emojiInput.value.length < 3) {
        emojiInput.value += emoji;
      }

      updatePreview();
      closeEmojiPicker();
    }

    // Open emoji picker
    function openEmojiPicker() {
      document.getElementById('emojiPickerModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Close emoji picker
    function closeEmojiPicker() {
      document.getElementById('emojiPickerModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    // Search emojis
    document.getElementById('emojiSearch').addEventListener('input', function(e) {
      const search = e.target.value.toLowerCase();
      const items = document.querySelectorAll('.emoji-item');

      items.forEach(item => {
        const name = item.querySelector('.emoji-item-name').textContent;
        if (name.includes(search) || search === '') {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
    });

    // Close modal on ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeEmojiPicker();
      }
    });

    // Update preview from both inputs
    function updatePreview() {
      const textInput = document.getElementById('textInput').value.toLowerCase().trim();
      const emojiInput = document.getElementById('emojiInput').value;

      let displayEmojis = '';
      let handleText = '';
      let validation = document.getElementById('validationMessage');

      // Priority: Use direct emoji input if present
      if (emojiInput) {
        // Validate: Only emojis, max 3
        const emojiRegex = /[\p{Emoji_Presentation}\p{Emoji}\uFE0F]/gu;
        const emojis = emojiInput.match(emojiRegex) || [];
        const otherChars = emojiInput.replace(emojiRegex, '');

        if (otherChars.length > 0) {
          validation.className = 'builder-preview-validation validation-invalid';
          validation.textContent = '‚ùå Only emojis allowed, no text or special characters';
          displayEmojis = '‚ùå';
          handleText = 'invalid@knexmail.com';
        } else if (emojis.length === 0) {
          validation.className = 'builder-preview-validation validation-warning';
          validation.textContent = '‚ÑπÔ∏è Paste emojis to get started';
          displayEmojis = 'üëã';
          handleText = 'yourhandle@knexmail.com';
        } else if (emojis.length > 3) {
          validation.className = 'builder-preview-validation validation-invalid';
          validation.textContent = `‚ùå Maximum 3 emojis allowed (you have ${emojis.length})`;
          displayEmojis = emojis.slice(0, 3).join('');
          // Find names for emojis
          const names = emojis.slice(0, 3).map(e => {
            const found = Object.entries(emojiMap).find(([k, v]) => v === e);
            return found ? found[0] : 'unknown';
          });
          handleText = names.join('.') + '@knexmail.com';
        } else if (emojis.length === 1) {
          displayEmojis = emojis.join('');
          const names = emojis.map(e => {
            const found = Object.entries(emojiMap).find(([k, v]) => v === e);
            return found ? found[0] : 'unknown';
          });
          handleText = names.join('.') + '@knexmail.com';
          validation.className = 'builder-preview-validation validation-valid';
          validation.textContent = `‚úì Valid! 1 emoji works (2-3 recommended)`;
          document.getElementById('textInput').value = names.join('.');
        } else {
          displayEmojis = emojis.join('');
          // Find names for emojis
          const names = emojis.map(e => {
            const found = Object.entries(emojiMap).find(([k, v]) => v === e);
            return found ? found[0] : 'unknown';
          });
          handleText = names.join('.') + '@knexmail.com';
          validation.className = 'builder-preview-validation validation-valid';
          validation.textContent = `‚úì Perfect! ${emojis.length} emojis, ready to reserve`;

          // Update text input to match
          document.getElementById('textInput').value = names.join('.');
        }
      }
      // Otherwise use text input
      else if (textInput) {
        const parts = textInput.split('.').filter(p => p.trim());
        const emojis = parts.map(p => emojiMap[p] || '‚ùì');
        displayEmojis = emojis.join('');
        handleText = textInput + '@knexmail.com';

        const totalLength = textInput.length;
        const emojiCount = parts.length;
        const unknownCount = emojis.filter(e => e === '‚ùì').length;

        if (emojiCount === 0) {
          validation.className = 'builder-preview-validation validation-warning';
          validation.textContent = '‚ÑπÔ∏è Type emoji names to get started';
        } else if (unknownCount > 0) {
          validation.className = 'builder-preview-validation validation-warning';
          validation.textContent = `‚ö†Ô∏è ${unknownCount} unknown emoji name(s) - view all emojis`;
        } else if (emojiCount > 3) {
          validation.className = 'builder-preview-validation validation-invalid';
          validation.textContent = `‚ùå Maximum 3 emojis allowed (you have ${emojiCount})`;
        } else if (totalLength > 64) {
          validation.className = 'builder-preview-validation validation-invalid';
          validation.textContent = `‚ùå Too long (${totalLength}/64 characters)`;
        } else if (emojiCount === 1) {
          validation.className = 'builder-preview-validation validation-valid';
          validation.textContent = `‚úì Valid! 1 emoji works (2-3 recommended for uniqueness)`;
          document.getElementById('emojiInput').value = emojis.join('');
        } else if (emojiCount >= 2) {
          validation.className = 'builder-preview-validation validation-valid';
          validation.textContent = `‚úì Perfect! ${emojiCount} emojis, ${totalLength} chars - ready to reserve`;
          document.getElementById('emojiInput').value = emojis.join('');
        } else {
          validation.className = 'builder-preview-validation validation-valid';
          validation.textContent = `‚úì Valid! ${emojiCount} emoji${emojiCount > 1 ? 's' : ''}, ${totalLength} characters`;
          document.getElementById('emojiInput').value = emojis.join('');
        }
      } else {
        displayEmojis = 'üëã';
        handleText = 'yourhandle@knexmail.com';
        validation.className = 'builder-preview-validation validation-warning';
        validation.textContent = '‚ÑπÔ∏è Choose an input method above';
      }

      document.getElementById('previewEmoji').textContent = displayEmojis;
      document.getElementById('previewHandle').textContent = handleText;
    }

    // Event listeners for both inputs
    document.getElementById('textInput').addEventListener('input', updatePreview);
    document.getElementById('emojiInput').addEventListener('input', updatePreview);

    // Prevent non-emoji characters in emoji input
    document.getElementById('emojiInput').addEventListener('keydown', function(e) {
      // Allow backspace, delete, arrow keys
      if (['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
        return;
      }
      // Block everything else except emoji pastes (handled in input event)
      if (e.key.length === 1) {
        e.preventDefault();
      }
    });

    // Initialize
    populateAllEmojis();
    updatePreview();
  </script>
</body>
</html>
